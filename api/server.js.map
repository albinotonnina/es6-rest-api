{"version":3,"sources":["../src/server.js"],"names":["require","config","express","path","bodyParser","mongodb","app","db","disable","set","engine","__express","use","req","res","next","json","urlencoded","extended","static","join","__dirname","MongoClient","connect","process","env","MONGODB_URI","err","database","console","log","exit","server","listen","PORT","port","address"],"mappings":";;AAAAA,QAAQ,QAAR,EAAkBC,MAAlB;;AAGA,IAAIC,UAAUF,QAAQ,SAAR,CAAd;AACA,IAAIG,OAAOH,QAAQ,MAAR,CAAX;AACA,IAAII,aAAaJ,QAAQ,aAAR,CAAjB;AACA,IAAIK,UAAUL,QAAQ,SAAR,CAAd;AACA;;AAEA;;AAEA,IAAIM,MAAMJ,SAAV;AACA,IAAIK,EAAJ;;AAGAD,IAAIE,OAAJ,CAAY,cAAZ;AACAF,IAAIG,GAAJ,CAAQ,aAAR,EAAuB,YAAvB;AACAH,IAAII,MAAJ,CAAW,YAAX,EAAyBV,QAAQ,KAAR,EAAeW,SAAxC;;AAEAL,IAAIM,GAAJ,CAAQ,UAASC,GAAT,EAAaC,GAAb,EAAiBC,IAAjB,EAAsB;AAC1BF,QAAIN,EAAJ,GAASA,EAAT;AACAQ;AACH,CAHD;;AAKAT,IAAIM,GAAJ,CAAQR,WAAWY,IAAX,EAAR,E,CAA4B;AAC5BV,IAAIM,GAAJ,CAAQR,WAAWa,UAAX,CAAsB,EAAEC,UAAU,IAAZ,EAAtB,CAAR,E,CAAoD;;;AAGpDZ,IAAIM,GAAJ,CAAQ,GAAR,EAAaZ,QAAQ,WAAR,CAAb;AACAM,IAAIM,GAAJ,CAAQ,SAAR,EAAmBZ,QAAQ,UAAR,CAAnB;AACAM,IAAIM,GAAJ,CAAQ,SAAR,EAAmBZ,QAAQ,WAAR,CAAnB;AACAM,IAAIM,GAAJ,CAAQ,SAAR,EAAmBV,QAAQiB,MAAR,CAAehB,KAAKiB,IAAL,CAAUC,SAAV,EAAqB,WAArB,CAAf,CAAnB;;AAEAhB,QAAQiB,WAAR,CAAoBC,OAApB,CAA4BC,QAAQC,GAAR,CAAYC,WAAxC,EAAqD,UAAUC,GAAV,EAAeC,QAAf,EAAyB;AAC1E,QAAID,GAAJ,EAAS;AACLE,gBAAQC,GAAR,CAAYH,GAAZ;AACAH,gBAAQO,IAAR,CAAa,CAAb;AACH;;AAED;AACAxB,SAAKqB,QAAL;AACAC,YAAQC,GAAR,CAAY,2BAAZ;;AAGA;AACA,QAAIE,SAAS1B,IAAI2B,MAAJ,CAAWT,QAAQC,GAAR,CAAYS,IAAZ,IAAoB,IAA/B,EAAqC,YAAY;AAC1D,YAAIC,OAAOH,OAAOI,OAAP,GAAiBD,IAA5B;AACAN,gBAAQC,GAAR,CAAY,yBAAZ,EAAuCK,IAAvC;AACH,KAHY,CAAb;AAIH,CAhBD","file":"server.js","sourcesContent":["require('dotenv').config();\n\n\nvar express = require(\"express\");\nvar path = require(\"path\");\nvar bodyParser = require(\"body-parser\");\nvar mongodb = require(\"mongodb\");\n// var ObjectID = mongodb.ObjectID;\n\n// var CONTACTS_COLLECTION = \"contacts\";\n\nvar app = express();\nvar db;\n\n\napp.disable(\"x-powered-by\");\napp.set('view engine', 'handlebars');\napp.engine('handlebars', require('hbs').__express);\n\napp.use(function(req,res,next){\n    req.db = db;\n    next();\n});\n\napp.use(bodyParser.json()); // for parsing application/json\napp.use(bodyParser.urlencoded({ extended: true })); // for parsing application/x-www-form-urlencoded\n\n\napp.use('/', require('./homedoc'));\napp.use('/getset', require('./getset'));\napp.use('/scrape', require('./scraper'));\napp.use('/assets', express.static(path.join(__dirname, '../assets')));\n\nmongodb.MongoClient.connect(process.env.MONGODB_URI, function (err, database) {\n    if (err) {\n        console.log(err);\n        process.exit(1);\n    }\n\n    // Save database object from the callback for reuse.\n    db = database;\n    console.log(\"Database connection ready\");\n\n\n    // Initialize the app.\n    var server = app.listen(process.env.PORT || 3000, function () {\n        var port = server.address().port;\n        console.log(\"App now running on port\", port);\n    });\n});\n"]}